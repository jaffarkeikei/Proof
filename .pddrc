version: "1.0"

contexts:
  # ============================================================
  # UTILS (Backend Configuration & Tools)
  # ============================================================

  config:
    paths: ["*config*"]
    defaults:
      outputs:
        code:
          path: "src/utils/config.js"

  logger:
    paths: ["*logger*"]
    defaults:
      outputs:
        code:
          path: "src/utils/logger.js"

  database:
    paths: ["*database*"]
    defaults:
      outputs:
        code:
          path: "src/utils/database.js"

  validation:
    paths: ["*validation*"]
    defaults:
      outputs:
        code:
          path: "src/utils/validation.js"

  # ============================================================
  # AGENTS (Pipeline Processing Agents)
  # ============================================================

  discovery_agent:
    paths: ["*discovery_agent*"]
    defaults:
      outputs:
        code:
          path: "src/agents/discovery.js"

  analysis_agent:
    paths: ["*analysis_agent*"]
    defaults:
      outputs:
        code:
          path: "src/agents/analysis.js"

  permission_agent:
    paths: ["*permission_agent*"]
    defaults:
      outputs:
        code:
          path: "src/agents/permission.js"

  generation_agent:
    paths: ["*generation_agent*"]
    defaults:
      outputs:
        code:
          path: "src/agents/generation.js"

  distribution_agent:
    paths: ["*distribution_agent*"]
    defaults:
      outputs:
        code:
          path: "src/agents/distribution.js"

  # ============================================================
  # PIPELINE (Orchestration & API)
  # ============================================================

  pipeline_orchestrator:
    paths: ["*pipeline_orchestrator*"]
    defaults:
      outputs:
        code:
          path: "src/pipeline/orchestrator.js"

  api_routes:
    paths: ["*api_routes*"]
    defaults:
      outputs:
        code:
          path: "src/api/routes.js"

  server:
    paths: ["*server*"]
    defaults:
      outputs:
        code:
          path: "src/server.js"

  # ============================================================
  # FRONTEND (Next.js App Router)
  # ============================================================

  root_layout:
    paths: ["*root_layout*"]
    defaults:
      outputs:
        code:
          path: "app/layout.tsx"

  dashboard_page:
    paths: ["*dashboard_page*"]
    defaults:
      outputs:
        code:
          path: "app/page.tsx"

  # ============================================================
  # COMPONENTS (React UI Components)
  # ============================================================

  pipeline_component:
    paths: ["*pipeline_component*"]
    defaults:
      outputs:
        code:
          path: "app/components/Pipeline.tsx"

  video_card_component:
    paths: ["*video_card_component*"]
    defaults:
      outputs:
        code:
          path: "app/components/VideoCard.tsx"

  # ============================================================
  # DEFAULT FALLBACK
  # ============================================================
  # CRITICAL: prompts_dir goes ONLY here, not in other contexts!

  default:
    defaults:
      prompts_dir: "prompts/"
      generate_output_path: "src/"
